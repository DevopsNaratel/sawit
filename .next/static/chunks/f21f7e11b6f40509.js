(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},31278,75254,e=>{"use strict";var t=e.i(71645);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},r=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim();var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,t.forwardRef)(({color:e="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:n="",children:d,iconNode:o,...c},x)=>(0,t.createElement)("svg",{ref:x,...a,width:s,height:s,stroke:e,strokeWidth:l?24*Number(i)/Number(s):i,className:r("lucide",n),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(c)&&{"aria-hidden":"true"},...c},[...o.map(([e,s])=>(0,t.createElement)(e,s)),...Array.isArray(d)?d:[d]])),l=(e,a)=>{let l=(0,t.forwardRef)(({className:l,...n},d)=>(0,t.createElement)(i,{ref:d,iconNode:a,className:r(`lucide-${s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,l),...n}));return l.displayName=s(e),l};e.s(["default",()=>l],75254);let n=l("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>n],31278)},21218,e=>{"use strict";let t=(0,e.i(75254).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);e.s(["Activity",()=>t],21218)},70756,e=>{"use strict";let t=(0,e.i(75254).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],70756)},92161,e=>{"use strict";let t=(0,e.i(75254).default)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);e.s(["Menu",()=>t],92161)},37727,e=>{"use strict";let t=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},71671,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(21218),a=e.i(70756),i=e.i(92161),l=e.i(37727);let n=(0,e.i(75254).default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var d=e.i(17255);function o({activePage:e,onPageChange:o}){let[c,x]=(0,s.useState)(!1),m=[{id:"jenkins",label:"Jenkins Approval",icon:r.Activity},{id:"k8s-secret",label:"K8s Secrets",icon:a.Lock}],p=async()=>{await (0,d.signOut)({callbackUrl:"/auth/signin"})};return(0,t.jsx)("nav",{className:"bg-neutral-900 border-b border-neutral-800 sticky top-0 z-50 backdrop-blur-sm bg-neutral-900/95",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-lg",children:(0,t.jsx)(r.Activity,{size:20,className:"text-white"})}),(0,t.jsx)("span",{className:"text-xl font-bold text-white hidden sm:block",children:"DevOps Gateway"})]}),(0,t.jsx)("div",{className:"hidden md:flex items-center gap-2",children:m.map(s=>{let r=s.icon,a=e===s.id;return(0,t.jsxs)("button",{onClick:()=>o(s.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-all ${a?"jenkins"===s.id?"bg-indigo-600/20 text-indigo-400 border border-indigo-500/30":"bg-purple-600/20 text-purple-400 border border-purple-500/30":"text-neutral-400 hover:text-white hover:bg-neutral-800"}`,children:[(0,t.jsx)(r,{size:18}),(0,t.jsx)("span",{children:s.label})]},s.id)})}),(0,t.jsx)("div",{className:"hidden md:flex items-center gap-3",children:(0,t.jsxs)("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2 text-neutral-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all",children:[(0,t.jsx)(n,{size:18}),(0,t.jsx)("span",{children:"Logout"})]})}),(0,t.jsx)("button",{onClick:()=>x(!c),className:"md:hidden p-2 text-neutral-400 hover:text-white rounded-lg hover:bg-neutral-800 transition-colors",children:c?(0,t.jsx)(l.X,{size:24}):(0,t.jsx)(i.Menu,{size:24})})]}),c&&(0,t.jsxs)("div",{className:"md:hidden py-4 space-y-2 border-t border-neutral-800",children:[m.map(s=>{let r=s.icon,a=e===s.id;return(0,t.jsxs)("button",{onClick:()=>{o(s.id),x(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg font-semibold transition-all ${a?"jenkins"===s.id?"bg-indigo-600/20 text-indigo-400 border border-indigo-500/30":"bg-purple-600/20 text-purple-400 border border-purple-500/30":"text-neutral-400 hover:text-white hover:bg-neutral-800"}`,children:[(0,t.jsx)(r,{size:20}),(0,t.jsx)("span",{children:s.label})]},s.id)}),(0,t.jsxs)("button",{onClick:p,className:"w-full flex items-center gap-3 px-4 py-3 text-red-400 hover:bg-red-500/10 rounded-lg transition-all",children:[(0,t.jsx)(n,{size:20}),(0,t.jsx)("span",{children:"Logout"})]})]})]})})}e.s(["default",()=>o],71671)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},74647,e=>{"use strict";var t=e.i(43476),s=e.i(18566),r=e.i(71671),a=e.i(71645),i=e.i(69638),l=e.i(75254);let n=(0,l.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var d=e.i(31278);let o=(0,l.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var c=e.i(21218);let x=(0,l.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),m=(0,l.default)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),p=(0,l.default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),h=(0,l.default)("git-branch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);function u(){let[e,s]=(0,a.useState)([]),[r,l]=(0,a.useState)(!0),[u,b]=(0,a.useState)(null),[g,j]=(0,a.useState)({text:"",type:""}),[y,f]=(0,a.useState)(!1),k=async()=>{try{let e=await fetch("/api/jenkins/pending",{cache:"no-store",headers:{"Content-Type":"application/json"}});if(!e.ok){console.error(`API Error: ${e.status} ${e.statusText}`),f(!0),s([]);return}let t=e.headers.get("content-type");if(!t||!t.includes("application/json")){console.error("Response bukan JSON:",await e.text()),f(!0),s([]);return}let r=await e.json(),a=Array.isArray(r)?r:r.data||[];s(a),f(!1)}catch(e){console.error("Error fetching builds:",e),f(!0),s([])}finally{l(!1)}};(0,a.useEffect)(()=>{k();let e=setInterval(k,1e4);return()=>clearInterval(e)},[]);let v=async(e,t,s)=>{b(`${e}-${s}`),j({text:"",type:""});try{let r=await fetch("/api/jenkins/approve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({buildId:e,jobName:t,action:s})});if(!r.ok)throw Error(`HTTP ${r.status}`);let a=await r.json();a.success?(j({text:a.message,type:"success"}),setTimeout(k,1500)):j({text:a.message||"Terjadi kesalahan",type:"error"})}catch(e){j({text:`Gagal: ${e.message}`,type:"error"})}finally{b(null)}},N=e=>{if(!e)return null;let t=e.match(/(\d+)\.(\d+)\.(\d+)/);return t?{full:t[0],major:parseInt(t[1]),minor:parseInt(t[2]),patch:parseInt(t[3])}:null},w=e.reduce((e,t)=>{let s=t.jobName;return e[s]||(e[s]=[]),e[s].push(t),e},{});Object.keys(w).forEach(e=>{w[e].sort((e,t)=>{let s=N(e.name),r=N(t.name);return s||r?s?r?s.major!==r.major?r.major-s.major:s.minor!==r.minor?r.minor-s.minor:r.patch-s.patch:-1:1:t.timestamp-e.timestamp})});let z=Object.keys(w).sort();return(0,t.jsxs)("div",{className:"min-h-screen bg-neutral-950 text-white p-6",children:[(0,t.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[(0,t.jsx)("div",{className:"absolute top-[-10%] right-[-5%] w-96 h-96 bg-indigo-600/10 rounded-full blur-3xl"}),(0,t.jsx)("div",{className:"absolute bottom-[-10%] left-[-5%] w-96 h-96 bg-blue-600/10 rounded-full blur-3xl"})]}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto relative z-10",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"p-2 bg-indigo-600/20 rounded-lg border border-indigo-500/30",children:(0,t.jsx)(c.Activity,{size:24,className:"text-indigo-400"})}),(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Jenkins Approval Gateway"})]}),(0,t.jsx)("p",{className:"text-neutral-400 ml-12",children:"Monitor dan kontrol pipeline deployment"})]}),g.text&&(0,t.jsxs)("div",{className:`mb-6 p-4 rounded-lg border flex items-center gap-3 animate-in fade-in slide-in-from-top-2 ${"success"===g.type?"bg-green-500/10 border-green-500/20 text-green-400":"bg-red-500/10 border-red-500/20 text-red-400"}`,children:["success"===g.type?(0,t.jsx)(i.CheckCircle,{size:20}):(0,t.jsx)(x,{size:20}),(0,t.jsx)("span",{children:g.text})]}),y&&!r&&(0,t.jsxs)("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-8 text-center mb-6",children:[(0,t.jsx)(m,{size:48,className:"mx-auto mb-4 text-red-400"}),(0,t.jsx)("h3",{className:"text-xl font-semibold mb-2 text-red-400",children:"API Endpoint Error"}),(0,t.jsxs)("p",{className:"text-neutral-300 mb-4",children:["Tidak dapat terhubung ke ",(0,t.jsx)("code",{className:"bg-neutral-900 px-2 py-1 rounded",children:"/api/jenkins/pending"})]}),(0,t.jsx)("button",{onClick:k,className:"mt-4 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-lg transition-colors",children:"Coba Lagi"})]}),r?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-neutral-400",children:[(0,t.jsx)(d.Loader2,{size:40,className:"animate-spin mb-4"}),(0,t.jsx)("p",{children:"Memuat data pipeline..."})]}):y||0!==e.length?!y&&(0,t.jsx)("div",{className:"space-y-6",children:z.map(e=>(0,t.jsxs)("div",{className:"bg-neutral-900 border border-neutral-800 rounded-xl p-6 hover:border-neutral-700 transition-all",children:[(0,t.jsx)("div",{className:"flex items-center justify-between gap-3 mb-5 pb-4 border-b border-neutral-800",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-indigo-600/20 rounded-lg border border-indigo-500/30",children:(0,t.jsx)(p,{size:20,className:"text-indigo-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-white",children:e}),(0,t.jsxs)("p",{className:"text-sm text-neutral-500",children:[w[e].length," version menunggu approval"]})]})]})}),(0,t.jsx)("div",{className:"space-y-4",children:w[e].map(e=>{let s=N(e.name);return(0,t.jsx)("div",{className:"bg-neutral-800/50 border border-neutral-700 rounded-lg p-4 hover:border-indigo-500/30 transition-all",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-[250px]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)(h,{size:18,className:"text-indigo-400"}),(0,t.jsx)("span",{className:"text-base font-semibold text-white",children:s?`Version ${s.full}`:`Build #${e.id}`}),(0,t.jsx)("span",{className:"px-2 py-0.5 bg-yellow-500/20 text-yellow-400 rounded text-xs font-semibold border border-yellow-500/30",children:"PENDING"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-neutral-400 ml-7",children:[(0,t.jsx)(o,{size:14}),(0,t.jsx)("span",{children:new Date(e.timestamp).toLocaleString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>v(e.id,e.jobName,"approve"),disabled:null!==u,className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-semibold rounded-lg shadow-lg shadow-green-500/20 transition-all transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:u===`${e.id}-approve`?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Loader2,{size:18,className:"animate-spin"}),(0,t.jsx)("span",{children:"Processing..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.CheckCircle,{size:18}),(0,t.jsx)("span",{children:"Deploy"})]})}),(0,t.jsx)("button",{onClick:()=>v(e.id,e.jobName,"abort"),disabled:null!==u,className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-red-600 to-rose-600 hover:from-red-500 hover:to-rose-500 text-white font-semibold rounded-lg shadow-lg shadow-red-500/20 transition-all transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:u===`${e.id}-abort`?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Loader2,{size:18,className:"animate-spin"}),(0,t.jsx)("span",{children:"Processing..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n,{size:18}),(0,t.jsx)("span",{children:"Abort"})]})})]})]})},`${e.jobName}-${e.id}`)})})]},e))}):(0,t.jsxs)("div",{className:"bg-neutral-900 border border-neutral-800 rounded-xl p-12 text-center",children:[(0,t.jsx)(i.CheckCircle,{size:48,className:"mx-auto mb-4 text-green-400"}),(0,t.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Tidak Ada Pipeline Menunggu"}),(0,t.jsx)("p",{className:"text-neutral-400",children:"Semua deployment sudah diproses"})]}),(0,t.jsx)("div",{className:"mt-8 text-center text-xs text-neutral-600",children:(0,t.jsx)("p",{children:"Auto-refresh setiap 10 detik â€¢ Production Gateway System"})})]})]})}function b(){let e=(0,s.useRouter)();return(0,t.jsxs)("div",{className:"min-h-screen bg-neutral-950",children:[(0,t.jsx)(r.default,{activePage:"jenkins",onPageChange:t=>{"jenkins"===t?e.push("/"):"k8s-secret"===t&&e.push("/secrets")}}),(0,t.jsx)("main",{children:(0,t.jsx)(u,{})})]})}e.s(["default",()=>b],74647)}]);