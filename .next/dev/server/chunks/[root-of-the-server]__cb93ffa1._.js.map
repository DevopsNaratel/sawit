{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///home/duwa/Git/Naratel-Devops-Dashboard/src/app/api/manifest/next-id/route.js"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport fs from 'fs';\nimport path from 'path';\nimport yaml from 'js-yaml';\n\nexport async function GET() {\n  const repoPath = process.env.MANIFEST_REPO_PATH;\n  const appsDir = path.join(repoPath, 'apps');\n  \n  let maxId = 0;\n  \n  if (fs.existsSync(appsDir)) {\n    const folders = fs.readdirSync(appsDir);\n    \n    for (const folder of folders) {\n      const valuesPath = path.join(appsDir, folder, 'values.yaml');\n      if (fs.existsSync(valuesPath)) {\n        const content = yaml.load(fs.readFileSync(valuesPath, 'utf8'));\n        const id = parseInt(content?.app?.id || '0');\n        if (id > maxId) maxId = id;\n      }\n    }\n  }\n  \n  const nextId = String(maxId + 1).padStart(3, '0');\n  return NextResponse.json({ nextId });\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe;IACpB,MAAM,WAAW,QAAQ,GAAG,CAAC,kBAAkB;IAC/C,MAAM,UAAU,4GAAI,CAAC,IAAI,CAAC,UAAU;IAEpC,IAAI,QAAQ;IAEZ,IAAI,wGAAE,CAAC,UAAU,CAAC,UAAU;QAC1B,MAAM,UAAU,wGAAE,CAAC,WAAW,CAAC;QAE/B,KAAK,MAAM,UAAU,QAAS;YAC5B,MAAM,aAAa,4GAAI,CAAC,IAAI,CAAC,SAAS,QAAQ;YAC9C,IAAI,wGAAE,CAAC,UAAU,CAAC,aAAa;gBAC7B,MAAM,UAAU,8JAAI,CAAC,IAAI,CAAC,wGAAE,CAAC,YAAY,CAAC,YAAY;gBACtD,MAAM,KAAK,SAAS,SAAS,KAAK,MAAM;gBACxC,IAAI,KAAK,OAAO,QAAQ;YAC1B;QACF;IACF;IAEA,MAAM,SAAS,OAAO,QAAQ,GAAG,QAAQ,CAAC,GAAG;IAC7C,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE;IAAO;AACpC"}}]
}