module.exports=[73236,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(70106);let f=(0,e.default)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),g=(0,e.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),h=(0,e.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var i=a.i(43108);let j=(0,e.default)("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);var k=a.i(16201);let l=(0,e.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var m=a.i(96221);let n=(0,e.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),o=(0,e.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),p=(0,e.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),q=(0,e.default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var r=a.i(33508),s=a.i(85066);function t(){let a=(0,d.useRouter)(),[e,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)(!0),[y,z]=(0,c.useState)({text:"",type:""}),[A,B]=(0,c.useState)({}),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)({secretName:"",namespace:"default",secretType:"Opaque",secretData:[{key:"",value:""}]}),I=async()=>{try{let a=await fetch(`/api/k8s/secret?namespace=${G.namespace}`),b=await a.json();b.success&&v(b.secrets||[])}catch(a){console.error("Error fetching secrets:",a)}finally{x(!1)}};(0,c.useEffect)(()=>{I()},[G.namespace]);let J=a=>{if(!a.name.endsWith(".env")&&!a.name.startsWith(".env"))return void z({text:"Harap upload file .env yang valid",type:"error"});let b=new FileReader;b.onload=b=>{try{let c,d,e=(c=b.target.result.split("\n"),d=[],c.forEach((a,b)=>{let c=a.trim();if(!c||c.startsWith("#"))return;let e=c.match(/^([^=]+)=(.*)$/);if(e){let a=e[1].trim(),b=e[2].trim();(b.startsWith('"')&&b.endsWith('"')||b.startsWith("'")&&b.endsWith("'"))&&(b=b.slice(1,-1)),d.push({key:a,value:b})}}),d);if(0===e.length)return void z({text:"File .env kosong atau format tidak valid",type:"error"});H(a=>({...a,secretData:e})),F(a.name),z({text:`âœ… ${e.length} variabel berhasil dimuat dari ${a.name}`,type:"success"})}catch(a){z({text:"Gagal membaca file .env",type:"error"})}},b.readAsText(a)},K=(a,b,c)=>{let d=[...G.secretData];d[a][b]=c,H({...G,secretData:d})},L=async()=>{if(t(!0),z({text:"",type:""}),!G.secretName||!G.namespace){z({text:"Secret name dan namespace diperlukan",type:"error"}),t(!1);return}let a={};if(G.secretData.forEach(b=>{b.key&&b.value&&(a[b.key]=b.value)}),0===Object.keys(a).length){z({text:"Minimal satu key-value pair diperlukan",type:"error"}),t(!1);return}try{let b=await fetch("/api/k8s/secret",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({secretName:G.secretName,namespace:G.namespace,secretType:G.secretType,data:a})}),c=await b.json();c.success?(z({text:c.message,type:"success"}),H({secretName:"",namespace:"default",secretType:"Opaque",secretData:[{key:"",value:""}]}),B({}),F(""),setTimeout(I,1e3)):z({text:c.message||"Gagal membuat secret",type:"error"})}catch(a){z({text:`Error: ${a.message}`,type:"error"})}finally{t(!1)}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s.default,{activePage:"k8s-secret",onPageChange:b=>{"jenkins"===b?a.push("/"):"k8s-secret"===b&&a.push("/secrets")}}),(0,b.jsxs)("div",{className:"min-h-screen bg-neutral-950 text-white",children:[(0,b.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[(0,b.jsx)("div",{className:"absolute top-[-10%] right-[-5%] w-96 h-96 bg-purple-600/10 rounded-full blur-3xl"}),(0,b.jsx)("div",{className:"absolute bottom-[-10%] left-[-5%] w-96 h-96 bg-indigo-600/10 rounded-full blur-3xl"})]}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto relative z-10 p-6",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("div",{className:"p-2 bg-purple-600/20 rounded-lg border border-purple-500/30",children:(0,b.jsx)(i.Lock,{size:24,className:"text-purple-400"})}),(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Kubernetes Secret Manager"})]}),(0,b.jsx)("p",{className:"text-neutral-400 ml-12",children:"Kelola secrets di cluster Kubernetes Anda"})]}),y.text&&(0,b.jsxs)("div",{className:`mb-6 p-4 rounded-lg border flex items-center gap-3 animate-in fade-in slide-in-from-top-2 ${"success"===y.type?"bg-green-500/10 border-green-500/20 text-green-400":"bg-red-500/10 border-red-500/20 text-red-400"}`,children:["success"===y.type?(0,b.jsx)(k.CheckCircle,{size:20}):(0,b.jsx)(l,{size:20}),(0,b.jsx)("span",{children:y.text})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsx)("div",{className:"lg:col-span-2",children:(0,b.jsxs)("div",{className:"bg-neutral-900 border border-neutral-800 rounded-xl p-6",children:[(0,b.jsxs)("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[(0,b.jsx)(f,{size:20,className:"text-purple-400"}),"Create New Secret"]}),(0,b.jsxs)("div",{className:"space-y-5",children:[1===G.secretData.length&&!G.secretData[0].key&&!G.secretData[0].value&&(0,b.jsxs)("div",{onDragOver:a=>{a.preventDefault(),D(!0)},onDragLeave:a=>{a.preventDefault(),D(!1)},onDrop:a=>{a.preventDefault(),D(!1);let b=a.dataTransfer.files;b.length>0&&J(b[0])},className:`border-2 border-dashed rounded-xl p-8 text-center transition-all cursor-pointer ${C?"border-purple-500 bg-purple-500/10":"border-neutral-700 bg-neutral-950/50 hover:border-neutral-600"}`,children:[(0,b.jsx)("input",{type:"file",accept:".env",onChange:a=>{let b=a.target.files;b.length>0&&J(b[0])},className:"hidden",id:"env-file-input"}),(0,b.jsxs)("label",{htmlFor:"env-file-input",className:"cursor-pointer",children:[(0,b.jsx)(p,{className:"mx-auto mb-3 text-neutral-500",size:40}),(0,b.jsx)("p",{className:"text-base font-semibold text-neutral-300 mb-1",children:"Drag & drop file .env di sini"}),(0,b.jsx)("p",{className:"text-sm text-neutral-500",children:"atau klik untuk memilih file"})]})]}),E&&(0,b.jsxs)("div",{className:"flex items-center justify-between bg-neutral-950 border border-neutral-800 p-4 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(q,{className:"text-green-400",size:20}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-sm text-white",children:E}),(0,b.jsxs)("p",{className:"text-xs text-neutral-500",children:[G.secretData.length," variabel dimuat"]})]})]}),(0,b.jsx)("button",{onClick:()=>{F(""),H(a=>({...a,secretData:[{key:"",value:""}]})),B({})},className:"text-neutral-500 hover:text-red-400 transition-colors",children:(0,b.jsx)(r.X,{size:18})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-neutral-400 uppercase tracking-wider mb-1.5 block",children:"Secret Name"}),(0,b.jsx)("input",{type:"text",value:G.secretName,onChange:a=>H({...G,secretName:a.target.value}),className:"w-full bg-neutral-950 border border-neutral-800 text-white rounded-lg px-4 py-2.5 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-all",placeholder:"my-secret"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-neutral-400 uppercase tracking-wider mb-1.5 block",children:"Namespace"}),(0,b.jsx)("input",{type:"text",value:G.namespace,onChange:a=>H({...G,namespace:a.target.value}),className:"w-full bg-neutral-950 border border-neutral-800 text-white rounded-lg px-4 py-2.5 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-all",placeholder:"default"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-neutral-400 uppercase tracking-wider mb-1.5 block",children:"Secret Type"}),(0,b.jsx)("select",{value:G.secretType,onChange:a=>H({...G,secretType:a.target.value}),className:"w-full bg-neutral-950 border border-neutral-800 text-white rounded-lg px-4 py-2.5 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-all",children:["Opaque","kubernetes.io/tls","kubernetes.io/dockerconfigjson","kubernetes.io/basic-auth"].map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-neutral-400 uppercase tracking-wider",children:"Secret Data"}),(0,b.jsxs)("button",{onClick:()=>{H({...G,secretData:[...G.secretData,{key:"",value:""}]})},className:"flex items-center gap-1 text-xs text-purple-400 hover:text-purple-300 transition-colors",children:[(0,b.jsx)(g,{size:14}),"Add Field"]})]}),(0,b.jsx)("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2",children:G.secretData.map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",value:a.key,onChange:a=>K(c,"key",a.target.value),className:"flex-1 bg-neutral-950 border border-neutral-800 text-white rounded-lg px-3 py-2 focus:outline-none focus:border-purple-500 transition-all text-sm font-mono",placeholder:"Key (e.g., DB_PASSWORD)"}),(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)("input",{type:A[c]?"text":"password",value:a.value,onChange:a=>K(c,"value",a.target.value),className:"w-full bg-neutral-950 border border-neutral-800 text-white rounded-lg px-3 py-2 pr-10 focus:outline-none focus:border-purple-500 transition-all text-sm font-mono",placeholder:"Value"}),(0,b.jsx)("button",{onClick:()=>{B(a=>({...a,[c]:!a[c]}))},className:"absolute right-2 top-1/2 -translate-y-1/2 text-neutral-500 hover:text-neutral-300 transition-colors",children:A[c]?(0,b.jsx)(o,{size:16}):(0,b.jsx)(n,{size:16})})]}),G.secretData.length>1&&(0,b.jsx)("button",{onClick:()=>{let a;return a=G.secretData.filter((a,b)=>b!==c),void H({...G,secretData:a})},className:"p-2 text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",children:(0,b.jsx)(h,{size:18})})]},c))})]}),(0,b.jsx)("button",{onClick:L,disabled:e,className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white font-bold py-3 px-4 rounded-lg shadow-lg shadow-purple-500/20 transition-all transform active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:e?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.Loader2,{size:20,className:"animate-spin"}),"Creating Secret..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Lock,{size:20}),"Create / Update Secret"]})})]})]})}),(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsxs)("div",{className:"bg-neutral-900 border border-neutral-800 rounded-xl p-6 sticky top-6",children:[(0,b.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,b.jsx)(j,{size:20,className:"text-indigo-400"}),"Existing Secrets"]}),(0,b.jsxs)("div",{className:"mb-4 text-xs text-neutral-500",children:["Namespace: ",(0,b.jsx)("span",{className:"text-indigo-400 font-semibold",children:G.namespace})]}),w?(0,b.jsx)("div",{className:"flex items-center justify-center py-8 text-neutral-500",children:(0,b.jsx)(m.Loader2,{size:24,className:"animate-spin"})}):0===u.length?(0,b.jsxs)("div",{className:"text-center py-8 text-neutral-500 text-sm",children:[(0,b.jsx)(i.Lock,{size:32,className:"mx-auto mb-2 opacity-50"}),"Tidak ada secret"]}):(0,b.jsx)("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:u.map((a,c)=>(0,b.jsx)("div",{className:"bg-neutral-950 border border-neutral-800 rounded-lg p-3 hover:border-neutral-700 transition-colors",children:(0,b.jsx)("div",{className:"flex items-start justify-between gap-2",children:(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-semibold text-sm text-white truncate",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-neutral-500 mt-0.5",children:a.type}),(0,b.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,b.jsx)(f,{size:12,className:"text-neutral-600"}),(0,b.jsxs)("span",{className:"text-xs text-neutral-600",children:[a.dataKeys.length," keys"]})]})]})})},c))})]})})]}),(0,b.jsxs)("div",{className:"mt-8 p-4 bg-neutral-900/50 border border-neutral-800 rounded-lg text-sm text-neutral-400",children:[(0,b.jsx)("p",{className:"mb-2",children:(0,b.jsx)("strong",{className:"text-white",children:"ðŸ’¡ Tips:"})}),(0,b.jsxs)("ul",{className:"space-y-1 ml-4 list-disc",children:[(0,b.jsx)("li",{children:"Upload file .env untuk load semua variabel sekaligus"}),(0,b.jsx)("li",{children:"Secret name harus huruf kecil dan dapat menggunakan dash (-)"}),(0,b.jsx)("li",{children:"Data akan di-encode base64 secara otomatis"}),(0,b.jsx)("li",{children:"Jika secret sudah ada, sistem akan melakukan update"})]})]})]})]})]})}a.s(["default",()=>t],73236)}];

//# sourceMappingURL=src_app_secrets_page_a487d42b.js.map